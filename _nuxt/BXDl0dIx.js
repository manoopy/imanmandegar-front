import{_ as z}from"./4KDdcyIw.js";import{_ as F}from"./CoNOeRoT.js";import{_ as O}from"./DJ35NeTS.js";import{_ as j}from"./Dul3CJAr.js";import{_ as $,e as U,l as k,m as A,n as B,p as S,q as x,s as C,o as _,c as v,v as J,x as q,y as L,z as N,A as P,b as c,w as b,h as m,a as E,F as Y,B as I,t as V,C as M,i as T}from"./BDlV69Nx.js";import{u as Z}from"./p_DT62--.js";import{u as D,s as G,q as Q}from"./C-_rzHJf.js";import"./DsGVK9Cf.js";import"./DMIqhTPN.js";class g extends Error{constructor(n){super(n),this.message=n,Object.setPrototypeOf(this,g.prototype)}}const R=U({props:{schema:{type:[Object,Function],default:void 0},state:{type:Object,required:!0},validate:{type:Function,default:()=>[]},validateOn:{type:Array,default:()=>["blur","input","change","submit"]}},emits:["submit","error"],setup(e,{expose:n,emit:a}){const i=k(),l=Z(`form-${i}`);A(()=>{l.on(async t=>{var s;t.type!=="submit"&&((s=e.validateOn)!=null&&s.includes(t.type))&&await d(t.path,{silent:!0})})}),B(()=>{l.reset()});const r=S([]);x("form-errors",r),x("form-events",l);const u=S({});x("form-inputs",u);async function y(){let t=await e.validate(e.state);if(e.schema)if(X(e.schema))t=t.concat(await ee(e.state,e.schema));else if(H(e.schema))t=t.concat(await W(e.state,e.schema));else if(te(e.schema))t=t.concat(await re(e.state,e.schema));else if(ne(e.schema))t=t.concat(await se(e.state,e.schema));else throw new Error("Form validation failed: Unsupported form schema");return t}async function d(t,s={silent:!1}){let o=t;if(t&&!Array.isArray(t)&&(o=[t]),o){const f=r.value.filter(p=>!o.includes(p.path)),w=(await y()).filter(p=>o.includes(p.path));r.value=f.concat(w)}else r.value=await y();if(r.value.length>0){if(s.silent)return!1;throw new g(`Form validation failed: ${JSON.stringify(r.value,null,2)}`)}return e.state}async function h(t){var o;const s=t;try{(o=e.validateOn)!=null&&o.includes("submit")&&await d(),s.data=e.state,a("submit",s)}catch(f){if(!(f instanceof g))throw f;const w={...s,errors:r.value.map(p=>({...p,id:u.value[p.path]}))};a("error",w)}}return n({validate:d,errors:r,setErrors(t,s){s?r.value=r.value.filter(o=>o.path!==s).concat(t):r.value=t},async submit(){await h(new Event("submit"))},getErrors(t){return t?r.value.filter(s=>s.path===t):r.value},clear(t){t?r.value=r.value.filter(s=>s.path!==t):r.value=[]}}),{onSubmit:h,errors:C(r)}}});function H(e){return e.validate&&e.__isYupSchema__}function K(e){return e.inner!==void 0}async function W(e,n){try{return await n.validate(e,{abortEarly:!1}),[]}catch(a){if(K(a))return a.inner.map(i=>({path:i.path??"",message:i.message}));throw a}}function X(e){return e.parse!==void 0}async function ee(e,n){const a=await n.safeParseAsync(e);return a.success===!1?a.error.issues.map(i=>({path:i.path.join("."),message:i.message})):[]}function te(e){return e.validateAsync!==void 0&&e.id!==void 0}function ae(e){return e.isJoi===!0}async function re(e,n){try{return await n.validateAsync(e,{abortEarly:!1}),[]}catch(a){if(ae(a))return a.details.map(i=>({path:i.path.join("."),message:i.message}));throw a}}function ne(e){return"_parse"in e||"_run"in e||typeof e=="function"&&"schema"in e}async function se(e,n){var i;return((i=(await("_parse"in n?n._parse(e):"_run"in n?n._run({typed:!1,value:e},{}):n(e))).issues)==null?void 0:i.map(l=>{var r;return{path:((r=l.path)==null?void 0:r.map(u=>u.key).join("."))||"",message:l.message}}))||[]}function oe(e,n,a,i,l,r){return _(),v("form",{onSubmit:n[0]||(n[0]=N((...u)=>e.onSubmit&&e.onSubmit(...u),["prevent"]))},[J(e.$slots,"default",q(L({errors:e.errors})))],32)}const ie=$(R,[["render",oe]]),ue={class:"flex gap-2 items-end"},le={class:"flex flex-col mt-12 text-lg"},ce={class:"select-all"},me={key:0,class:"text-green-800 mr-1"},fe=U({__name:"index",setup(e){const n=D(),a=P({surah:1,from:1,to:7}),i=()=>{n.surah=Q[a.surah].slice(a.from-1,a.to+1)},l=()=>{const r=n.surah.map(u=>u.text+" ").join("");navigator.clipboard.writeText(r).then(()=>{alert("متن کپی شد")})};return(r,u)=>{const y=z,d=F,h=O,t=j,s=ie;return _(),v("div",null,[c(s,{state:m(a),onSubmit:i,class:"grid grid-cols-4 gap-6"},{default:b(()=>[c(d,{label:"سوره",name:"surah",size:"lg"},{default:b(()=>[c(y,{modelValue:m(a).surah,"onUpdate:modelValue":u[0]||(u[0]=o=>m(a).surah=o),options:"surahList"in r?r.surahList:m(G),placeholder:"انتخاب کنید","option-attribute":"name","value-attribute":"number"},null,8,["modelValue","options"])]),_:1}),c(d,{label:"از آیه",name:"from",size:"lg"},{default:b(()=>[c(h,{modelValue:m(a).from,"onUpdate:modelValue":u[1]||(u[1]=o=>m(a).from=o),size:"lg",type:"number"},null,8,["modelValue"])]),_:1}),c(d,{label:"تا آیه",name:"to",size:"lg"},{default:b(()=>[c(h,{modelValue:m(a).to,"onUpdate:modelValue":u[2]||(u[2]=o=>m(a).to=o),size:"lg",type:"number"},null,8,["modelValue"])]),_:1}),E("div",ue,[c(t,{label:"اجرا",size:"md",class:"px-4",type:"submit"}),c(t,{label:"کپی",size:"md",class:"px-4",onClick:l})])]),_:1},8,["state"]),E("div",le,[(_(!0),v(Y,null,I(m(n).surah,(o,f)=>(_(),v("p",{key:f,class:"border-b border-gray-100 pb-2 mb-2 text-center"},[E("span",ce,V(o.text),1),f>0?(_(),v("span",me,"("+V(f)+")",1)):M("",!0)]))),128))])])}}}),de={};function pe(e,n){const a=fe;return _(),T(a)}const Se=$(de,[["render",pe]]);export{Se as default};
